'use strict';

/* global require, chai, describe, before, it */
/* global window */
var expect = chai.expect;
var Mock, Random, $, _;

describe('Mock.valid', function () {
    before(function (done) {
        require(['mock', 'underscore', 'jquery'], function () {
            Mock = arguments[0];
            window.Random = Random = Mock.Random;
            _ = arguments[1];
            $ = arguments[2];
            expect(Mock).to.not.equal(undefined);
            expect(_).to.not.equal(undefined);
            expect($).to.not.equal(undefined);
            done();
        });
    });

    function stringify(json) {
        return JSON.stringify(json /*, null, 4*/);
    }

    function title(tpl, data, result, test) {
        test.title = stringify(tpl) + ' VS ' + stringify(data) + '\n\tresult: ' + stringify(result);

        // if (result.length) test.title += '\n\tresult: '
        // for (var i = 0; i < result.length; i++) {
        //     test.title += '\n\t' + result[i].message // stringify(result)
        // }
    }

    function doit(tpl, data, len) {
        it('', function () {
            var result = Mock.valid(tpl, data);
            title(tpl, data, result, this.test);
            expect(result).to.be.an('array').with.length(len);
        });
    }

    describe('Name', function () {
        doit({
            name: 1
        }, {
            name: 1
        }, 0);

        doit({
            name1: 1
        }, {
            name2: 1
        }, 1);
    });
    describe('Value - Number', function () {
        doit({
            name: 1
        }, {
            name: 1
        }, 0);

        doit({
            name: 1
        }, {
            name: 2
        }, 1);

        doit({
            name: 1.1
        }, {
            name: 2.2
        }, 1);

        doit({
            'name|1-10': 1
        }, {
            name: 5
        }, 0);

        doit({
            'name|1-10': 1
        }, {
            name: 0
        }, 1);

        doit({
            'name|1-10': 1
        }, {
            name: 11
        }, 1);
    });
    describe('Value - String', function () {
        doit({
            name: 'value'
        }, {
            name: 'value'
        }, 0);

        doit({
            name: 'value1'
        }, {
            name: 'value2'
        }, 1);

        doit({
            'name|1': 'value'
        }, {
            name: 'value'
        }, 0);

        doit({
            'name|2': 'value'
        }, {
            name: 'valuevalue'
        }, 0);

        doit({
            'name|2': 'value'
        }, {
            name: 'value'
        }, 1);

        doit({
            'name|2-3': 'value'
        }, {
            name: 'value'
        }, 1);

        doit({
            'name|2-3': 'value'
        }, {
            name: 'valuevaluevaluevalue'
        }, 1);
    });
    describe('Value - RgeExp', function () {
        doit({
            name: /value/
        }, {
            name: 'value'
        }, 0);
        doit({
            name: /value/
        }, {
            name: 'vvvvv'
        }, 1);
        doit({
            'name|1-10': /value/
        }, {
            name: 'valuevaluevaluevaluevalue'
        }, 0);
        doit({
            'name|1-10': /value/
        }, {
            name: 'vvvvvvvvvvvvvvvvvvvvvvvvv'
        }, 1);
        doit({
            'name|1-10': /^value$/
        }, {
            name: 'valuevaluevaluevaluevalue'
        }, 0);
        doit({
            name: /[a-z][A-Z][0-9]/
        }, {
            name: 'yL5'
        }, 0);
    });
    describe('Value - Object', function () {
        doit({
            name: 1
        }, {
            name: 1
        }, 0);
        doit({
            name1: 1
        }, {
            name2: 2
        }, 1);
        doit({
            name1: 1,
            name2: 2
        }, {
            name3: 3
        }, 1);
        doit({
            name1: 1,
            name2: 2
        }, {
            name1: '1',
            name2: '2'
        }, 2);
        doit({
            a: {
                b: {
                    c: {
                        d: 1
                    }
                }
            }
        }, {
            a: {
                b: {
                    c: {
                        d: 2
                    }
                }
            }
        }, 1);
    });
    describe('Value - Array', function () {
        doit([1, 2, 3], [1, 2, 3], 0);

        doit([1, 2, 3], [1, 2, 3, 4], 1);

        // 'name|1': array
        doit({
            'name|1': [1, 2, 3]
        }, {
            'name': 1
        }, 0);
        doit({
            'name|1': [1, 2, 3]
        }, {
            'name': 2
        }, 0);
        doit({
            'name|1': [1, 2, 3]
        }, {
            'name': 3
        }, 0);
        doit({ // 不检测
            'name|1': [1, 2, 3]
        }, {
            'name': 4
        }, 0);

        // 'name|+1': array
        doit({
            'name|+1': [1, 2, 3]
        }, {
            'name': 1
        }, 0);
        doit({
            'name|+1': [1, 2, 3]
        }, {
            'name': 2
        }, 0);
        doit({
            'name|+1': [1, 2, 3]
        }, {
            'name': 3
        }, 0);
        doit({
            'name|+1': [1, 2, 3]
        }, {
            'name': 4
        }, 0);

        // 'name|min-max': array
        doit({
            'name|2-3': [1]
        }, {
            'name': [1, 2, 3, 4]
        }, 1);

        doit({
            'name|2-3': [1]
        }, {
            'name': [1]
        }, 1);

        doit({
            'name|2-3': [1, 2, 3]
        }, {
            'name': [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]
        }, 1);

        doit({
            'name|2-3': [1, 2, 3]
        }, {
            'name': [1, 2, 3]
        }, 1);

        doit({
            'name|2-3': [1]
        }, {
            'name': [1, 1, 1]
        }, 0);

        doit({
            'name|2-3': [1]
        }, {
            'name': [1, 2, 3]
        }, 2);

        // 'name|count': array
    });
    describe('Value - Placeholder', function () {
        doit({
            name: '@email'
        }, {
            name: 'nuysoft@gmail.com'
        }, 0);
        doit({
            name: '@int'
        }, {
            name: 123
        }, 0);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QubW9jay52YWxpZC5qcyJdLCJuYW1lcyI6WyJleHBlY3QiLCJjaGFpIiwiTW9jayIsIlJhbmRvbSIsIiQiLCJfIiwiZGVzY3JpYmUiLCJiZWZvcmUiLCJkb25lIiwicmVxdWlyZSIsImFyZ3VtZW50cyIsIndpbmRvdyIsInRvIiwibm90IiwiZXF1YWwiLCJ1bmRlZmluZWQiLCJzdHJpbmdpZnkiLCJqc29uIiwiSlNPTiIsInRpdGxlIiwidHBsIiwiZGF0YSIsInJlc3VsdCIsInRlc3QiLCJkb2l0IiwibGVuIiwiaXQiLCJ2YWxpZCIsImJlIiwiYW4iLCJ3aXRoIiwibGVuZ3RoIiwibmFtZSIsIm5hbWUxIiwibmFtZTIiLCJuYW1lMyIsImEiLCJiIiwiYyIsImQiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBLElBQUlBLFNBQVNDLEtBQUtELE1BQWxCO0FBQ0EsSUFBSUUsSUFBSixFQUFVQyxNQUFWLEVBQWtCQyxDQUFsQixFQUFxQkMsQ0FBckI7O0FBRUFDLFNBQVMsWUFBVCxFQUF1QixZQUFXO0FBQzlCQyxXQUFPLFVBQVNDLElBQVQsRUFBZTtBQUNsQkMsZ0JBQVEsQ0FBQyxNQUFELEVBQVMsWUFBVCxFQUF1QixRQUF2QixDQUFSLEVBQTBDLFlBQVc7QUFDakRQLG1CQUFPUSxVQUFVLENBQVYsQ0FBUDtBQUNBQyxtQkFBT1IsTUFBUCxHQUFnQkEsU0FBU0QsS0FBS0MsTUFBOUI7QUFDQUUsZ0JBQUlLLFVBQVUsQ0FBVixDQUFKO0FBQ0FOLGdCQUFJTSxVQUFVLENBQVYsQ0FBSjtBQUNBVixtQkFBT0UsSUFBUCxFQUFhVSxFQUFiLENBQWdCQyxHQUFoQixDQUFvQkMsS0FBcEIsQ0FBMEJDLFNBQTFCO0FBQ0FmLG1CQUFPSyxDQUFQLEVBQVVPLEVBQVYsQ0FBYUMsR0FBYixDQUFpQkMsS0FBakIsQ0FBdUJDLFNBQXZCO0FBQ0FmLG1CQUFPSSxDQUFQLEVBQVVRLEVBQVYsQ0FBYUMsR0FBYixDQUFpQkMsS0FBakIsQ0FBdUJDLFNBQXZCO0FBQ0FQO0FBQ0gsU0FURDtBQVVILEtBWEQ7O0FBYUEsYUFBU1EsU0FBVCxDQUFtQkMsSUFBbkIsRUFBeUI7QUFDckIsZUFBT0MsS0FBS0YsU0FBTCxDQUFlQyxJQUFmLENBQW9CLGFBQXBCLENBQVA7QUFDSDs7QUFFRCxhQUFTRSxLQUFULENBQWVDLEdBQWYsRUFBb0JDLElBQXBCLEVBQTBCQyxNQUExQixFQUFrQ0MsSUFBbEMsRUFBd0M7QUFDcENBLGFBQUtKLEtBQUwsR0FBYUgsVUFBVUksR0FBVixJQUFpQixNQUFqQixHQUEwQkosVUFBVUssSUFBVixDQUExQixHQUE0QyxjQUE1QyxHQUE2REwsVUFBVU0sTUFBVixDQUExRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVELGFBQVNFLElBQVQsQ0FBY0osR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUJJLEdBQXpCLEVBQThCO0FBQzFCQyxXQUFHLEVBQUgsRUFBTyxZQUFXO0FBQ2QsZ0JBQUlKLFNBQVNwQixLQUFLeUIsS0FBTCxDQUFXUCxHQUFYLEVBQWdCQyxJQUFoQixDQUFiO0FBQ0FGLGtCQUFNQyxHQUFOLEVBQVdDLElBQVgsRUFBaUJDLE1BQWpCLEVBQXlCLEtBQUtDLElBQTlCO0FBQ0F2QixtQkFBT3NCLE1BQVAsRUFBZVYsRUFBZixDQUFrQmdCLEVBQWxCLENBQXFCQyxFQUFyQixDQUF3QixPQUF4QixFQUFpQ0MsSUFBakMsQ0FBc0NDLE1BQXRDLENBQTZDTixHQUE3QztBQUNILFNBSkQ7QUFLSDs7QUFFRG5CLGFBQVMsTUFBVCxFQUFpQixZQUFXO0FBQ3hCa0IsYUFBSztBQUNEUSxrQkFBTTtBQURMLFNBQUwsRUFFRztBQUNDQSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIOztBQU1BUixhQUFLO0FBQ0RTLG1CQUFPO0FBRE4sU0FBTCxFQUVHO0FBQ0NDLG1CQUFPO0FBRFIsU0FGSCxFQUlHLENBSkg7QUFLSCxLQVpEO0FBYUE1QixhQUFTLGdCQUFULEVBQTJCLFlBQVc7QUFDbENrQixhQUFLO0FBQ0RRLGtCQUFNO0FBREwsU0FBTCxFQUVHO0FBQ0NBLGtCQUFNO0FBRFAsU0FGSCxFQUlHLENBSkg7O0FBTUFSLGFBQUs7QUFDRFEsa0JBQU07QUFETCxTQUFMLEVBRUc7QUFDQ0Esa0JBQU07QUFEUCxTQUZILEVBSUcsQ0FKSDs7QUFNQVIsYUFBSztBQUNEUSxrQkFBTTtBQURMLFNBQUwsRUFFRztBQUNDQSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIOztBQU1BUixhQUFLO0FBQ0QseUJBQWE7QUFEWixTQUFMLEVBRUc7QUFDQ1Esa0JBQU07QUFEUCxTQUZILEVBSUcsQ0FKSDs7QUFNQVIsYUFBSztBQUNELHlCQUFhO0FBRFosU0FBTCxFQUVHO0FBQ0NRLGtCQUFNO0FBRFAsU0FGSCxFQUlHLENBSkg7O0FBTUFSLGFBQUs7QUFDRCx5QkFBYTtBQURaLFNBQUwsRUFFRztBQUNDUSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0gsS0FwQ0Q7QUFxQ0ExQixhQUFTLGdCQUFULEVBQTJCLFlBQVc7QUFDbENrQixhQUFLO0FBQ0RRLGtCQUFNO0FBREwsU0FBTCxFQUVHO0FBQ0NBLGtCQUFNO0FBRFAsU0FGSCxFQUlHLENBSkg7O0FBTUFSLGFBQUs7QUFDRFEsa0JBQU07QUFETCxTQUFMLEVBRUc7QUFDQ0Esa0JBQU07QUFEUCxTQUZILEVBSUcsQ0FKSDs7QUFNQVIsYUFBSztBQUNELHNCQUFVO0FBRFQsU0FBTCxFQUVHO0FBQ0NRLGtCQUFNO0FBRFAsU0FGSCxFQUlHLENBSkg7O0FBTUFSLGFBQUs7QUFDRCxzQkFBVTtBQURULFNBQUwsRUFFRztBQUNDUSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIOztBQU1BUixhQUFLO0FBQ0Qsc0JBQVU7QUFEVCxTQUFMLEVBRUc7QUFDQ1Esa0JBQU07QUFEUCxTQUZILEVBSUcsQ0FKSDs7QUFNQVIsYUFBSztBQUNELHdCQUFZO0FBRFgsU0FBTCxFQUVHO0FBQ0NRLGtCQUFNO0FBRFAsU0FGSCxFQUlHLENBSkg7O0FBTUFSLGFBQUs7QUFDRCx3QkFBWTtBQURYLFNBQUwsRUFFRztBQUNDUSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0gsS0ExQ0Q7QUEyQ0ExQixhQUFTLGdCQUFULEVBQTJCLFlBQVc7QUFDbENrQixhQUFLO0FBQ0RRLGtCQUFNO0FBREwsU0FBTCxFQUVHO0FBQ0NBLGtCQUFNO0FBRFAsU0FGSCxFQUlHLENBSkg7QUFLQVIsYUFBSztBQUNEUSxrQkFBTTtBQURMLFNBQUwsRUFFRztBQUNDQSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0FSLGFBQUs7QUFDRCx5QkFBYTtBQURaLFNBQUwsRUFFRztBQUNDUSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0FSLGFBQUs7QUFDRCx5QkFBYTtBQURaLFNBQUwsRUFFRztBQUNDUSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0FSLGFBQUs7QUFDRCx5QkFBYTtBQURaLFNBQUwsRUFFRztBQUNDUSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0FSLGFBQUs7QUFDRFEsa0JBQU07QUFETCxTQUFMLEVBRUc7QUFDQ0Esa0JBQU07QUFEUCxTQUZILEVBSUcsQ0FKSDtBQUtILEtBL0JEO0FBZ0NBMUIsYUFBUyxnQkFBVCxFQUEyQixZQUFXO0FBQ2xDa0IsYUFBSztBQUNEUSxrQkFBTTtBQURMLFNBQUwsRUFFRztBQUNDQSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0FSLGFBQUs7QUFDRFMsbUJBQU87QUFETixTQUFMLEVBRUc7QUFDQ0MsbUJBQU87QUFEUixTQUZILEVBSUcsQ0FKSDtBQUtBVixhQUFLO0FBQ0RTLG1CQUFPLENBRE47QUFFREMsbUJBQU87QUFGTixTQUFMLEVBR0c7QUFDQ0MsbUJBQU87QUFEUixTQUhILEVBS0csQ0FMSDtBQU1BWCxhQUFLO0FBQ0RTLG1CQUFPLENBRE47QUFFREMsbUJBQU87QUFGTixTQUFMLEVBR0c7QUFDQ0QsbUJBQU8sR0FEUjtBQUVDQyxtQkFBTztBQUZSLFNBSEgsRUFNRyxDQU5IO0FBT0FWLGFBQUs7QUFDRFksZUFBRztBQUNDQyxtQkFBRztBQUNDQyx1QkFBRztBQUNDQywyQkFBRztBQURKO0FBREo7QUFESjtBQURGLFNBQUwsRUFRRztBQUNDSCxlQUFHO0FBQ0NDLG1CQUFHO0FBQ0NDLHVCQUFHO0FBQ0NDLDJCQUFHO0FBREo7QUFESjtBQURKO0FBREosU0FSSCxFQWdCRyxDQWhCSDtBQWlCSCxLQXpDRDtBQTBDQWpDLGFBQVMsZUFBVCxFQUEwQixZQUFXO0FBQ2pDa0IsYUFBSyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxDQUFMLEVBQWdCLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBQWhCLEVBQTJCLENBQTNCOztBQUVBQSxhQUFLLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQLENBQUwsRUFBZ0IsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLENBQWhCLEVBQThCLENBQTlCOztBQUVBO0FBQ0FBLGFBQUs7QUFDRCxzQkFBVSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtBQURULFNBQUwsRUFFRztBQUNDLG9CQUFRO0FBRFQsU0FGSCxFQUlHLENBSkg7QUFLQUEsYUFBSztBQUNELHNCQUFVLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0FBRFQsU0FBTCxFQUVHO0FBQ0Msb0JBQVE7QUFEVCxTQUZILEVBSUcsQ0FKSDtBQUtBQSxhQUFLO0FBQ0Qsc0JBQVUsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7QUFEVCxTQUFMLEVBRUc7QUFDQyxvQkFBUTtBQURULFNBRkgsRUFJRyxDQUpIO0FBS0FBLGFBQUssRUFBRTtBQUNILHNCQUFVLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0FBRFQsU0FBTCxFQUVHO0FBQ0Msb0JBQVE7QUFEVCxTQUZILEVBSUcsQ0FKSDs7QUFNQTtBQUNBQSxhQUFLO0FBQ0QsdUJBQVcsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7QUFEVixTQUFMLEVBRUc7QUFDQyxvQkFBUTtBQURULFNBRkgsRUFJRyxDQUpIO0FBS0FBLGFBQUs7QUFDRCx1QkFBVyxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtBQURWLFNBQUwsRUFFRztBQUNDLG9CQUFRO0FBRFQsU0FGSCxFQUlHLENBSkg7QUFLQUEsYUFBSztBQUNELHVCQUFXLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0FBRFYsU0FBTCxFQUVHO0FBQ0Msb0JBQVE7QUFEVCxTQUZILEVBSUcsQ0FKSDtBQUtBQSxhQUFLO0FBQ0QsdUJBQVcsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7QUFEVixTQUFMLEVBRUc7QUFDQyxvQkFBUTtBQURULFNBRkgsRUFJRyxDQUpIOztBQU1BO0FBQ0FBLGFBQUs7QUFDRCx3QkFBWSxDQUFDLENBQUQ7QUFEWCxTQUFMLEVBRUc7QUFDQyxvQkFBUSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVY7QUFEVCxTQUZILEVBSUcsQ0FKSDs7QUFNQUEsYUFBSztBQUNELHdCQUFZLENBQUMsQ0FBRDtBQURYLFNBQUwsRUFFRztBQUNDLG9CQUFRLENBQUMsQ0FBRDtBQURULFNBRkgsRUFJRyxDQUpIOztBQU1BQSxhQUFLO0FBQ0Qsd0JBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7QUFEWCxTQUFMLEVBRUc7QUFDQyxvQkFBUSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLENBQWhCLEVBQW1CLENBQW5CLEVBQXNCLENBQXRCLEVBQXlCLENBQXpCLEVBQTRCLENBQTVCLEVBQStCLENBQS9CLEVBQWtDLENBQWxDO0FBRFQsU0FGSCxFQUlHLENBSkg7O0FBTUFBLGFBQUs7QUFDRCx3QkFBWSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtBQURYLFNBQUwsRUFFRztBQUNDLG9CQUFRLENBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxDQUFQO0FBRFQsU0FGSCxFQUlHLENBSkg7O0FBTUFBLGFBQUs7QUFDRCx3QkFBWSxDQUFDLENBQUQ7QUFEWCxTQUFMLEVBRUc7QUFDQyxvQkFBUSxDQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtBQURULFNBRkgsRUFJRyxDQUpIOztBQU1BQSxhQUFLO0FBQ0Qsd0JBQVksQ0FBQyxDQUFEO0FBRFgsU0FBTCxFQUVHO0FBQ0Msb0JBQVEsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7QUFEVCxTQUZILEVBSUcsQ0FKSDs7QUFNQTtBQUNILEtBdkZEO0FBd0ZBbEIsYUFBUyxxQkFBVCxFQUFnQyxZQUFXO0FBQ3ZDa0IsYUFBSztBQUNEUSxrQkFBTTtBQURMLFNBQUwsRUFFRztBQUNDQSxrQkFBTTtBQURQLFNBRkgsRUFJRyxDQUpIO0FBS0FSLGFBQUs7QUFDRFEsa0JBQU07QUFETCxTQUFMLEVBRUc7QUFDQ0Esa0JBQU07QUFEUCxTQUZILEVBSUcsQ0FKSDtBQUtILEtBWEQ7QUFZSCxDQTlTRCIsImZpbGUiOiJ0ZXN0Lm1vY2sudmFsaWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgcmVxdWlyZSwgY2hhaSwgZGVzY3JpYmUsIGJlZm9yZSwgaXQgKi9cbi8qIGdsb2JhbCB3aW5kb3cgKi9cbnZhciBleHBlY3QgPSBjaGFpLmV4cGVjdFxudmFyIE1vY2ssIFJhbmRvbSwgJCwgX1xuXG5kZXNjcmliZSgnTW9jay52YWxpZCcsIGZ1bmN0aW9uKCkge1xuICAgIGJlZm9yZShmdW5jdGlvbihkb25lKSB7XG4gICAgICAgIHJlcXVpcmUoWydtb2NrJywgJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5J10sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgTW9jayA9IGFyZ3VtZW50c1swXVxuICAgICAgICAgICAgd2luZG93LlJhbmRvbSA9IFJhbmRvbSA9IE1vY2suUmFuZG9tXG4gICAgICAgICAgICBfID0gYXJndW1lbnRzWzFdXG4gICAgICAgICAgICAkID0gYXJndW1lbnRzWzJdXG4gICAgICAgICAgICBleHBlY3QoTW9jaykudG8ubm90LmVxdWFsKHVuZGVmaW5lZClcbiAgICAgICAgICAgIGV4cGVjdChfKS50by5ub3QuZXF1YWwodW5kZWZpbmVkKVxuICAgICAgICAgICAgZXhwZWN0KCQpLnRvLm5vdC5lcXVhbCh1bmRlZmluZWQpXG4gICAgICAgICAgICBkb25lKClcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gc3RyaW5naWZ5KGpzb24pIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGpzb24gLyosIG51bGwsIDQqLyApXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGl0bGUodHBsLCBkYXRhLCByZXN1bHQsIHRlc3QpIHtcbiAgICAgICAgdGVzdC50aXRsZSA9IHN0cmluZ2lmeSh0cGwpICsgJyBWUyAnICsgc3RyaW5naWZ5KGRhdGEpICsgJ1xcblxcdHJlc3VsdDogJyArIHN0cmluZ2lmeShyZXN1bHQpXG5cbiAgICAgICAgLy8gaWYgKHJlc3VsdC5sZW5ndGgpIHRlc3QudGl0bGUgKz0gJ1xcblxcdHJlc3VsdDogJ1xuICAgICAgICAvLyBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyAgICAgdGVzdC50aXRsZSArPSAnXFxuXFx0JyArIHJlc3VsdFtpXS5tZXNzYWdlIC8vIHN0cmluZ2lmeShyZXN1bHQpXG4gICAgICAgIC8vIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkb2l0KHRwbCwgZGF0YSwgbGVuKSB7XG4gICAgICAgIGl0KCcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBNb2NrLnZhbGlkKHRwbCwgZGF0YSlcbiAgICAgICAgICAgIHRpdGxlKHRwbCwgZGF0YSwgcmVzdWx0LCB0aGlzLnRlc3QpXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50by5iZS5hbignYXJyYXknKS53aXRoLmxlbmd0aChsZW4pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGVzY3JpYmUoJ05hbWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICBuYW1lOiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IDFcbiAgICAgICAgfSwgMClcblxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWUxOiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWUyOiAxXG4gICAgICAgIH0sIDEpXG4gICAgfSlcbiAgICBkZXNjcmliZSgnVmFsdWUgLSBOdW1iZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICBuYW1lOiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IDFcbiAgICAgICAgfSwgMClcblxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWU6IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogMlxuICAgICAgICB9LCAxKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgbmFtZTogMS4xXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IDIuMlxuICAgICAgICB9LCAxKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8MS0xMCc6IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogNVxuICAgICAgICB9LCAwKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8MS0xMCc6IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogMFxuICAgICAgICB9LCAxKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8MS0xMCc6IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogMTFcbiAgICAgICAgfSwgMSlcbiAgICB9KVxuICAgIGRlc2NyaWJlKCdWYWx1ZSAtIFN0cmluZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWU6ICd2YWx1ZSdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlJ1xuICAgICAgICB9LCAwKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlMSdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlMidcbiAgICAgICAgfSwgMSlcblxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDEnOiAndmFsdWUnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICd2YWx1ZSdcbiAgICAgICAgfSwgMClcblxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDInOiAndmFsdWUnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICd2YWx1ZXZhbHVlJ1xuICAgICAgICB9LCAwKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8Mic6ICd2YWx1ZSdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlJ1xuICAgICAgICB9LCAxKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8Mi0zJzogJ3ZhbHVlJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAndmFsdWUnXG4gICAgICAgIH0sIDEpXG5cbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICAnbmFtZXwyLTMnOiAndmFsdWUnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICd2YWx1ZXZhbHVldmFsdWV2YWx1ZSdcbiAgICAgICAgfSwgMSlcbiAgICB9KVxuICAgIGRlc2NyaWJlKCdWYWx1ZSAtIFJnZUV4cCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWU6IC92YWx1ZS9cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVlJ1xuICAgICAgICB9LCAwKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWU6IC92YWx1ZS9cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3Z2dnZ2J1xuICAgICAgICB9LCAxKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDEtMTAnOiAvdmFsdWUvXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICd2YWx1ZXZhbHVldmFsdWV2YWx1ZXZhbHVlJ1xuICAgICAgICB9LCAwKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDEtMTAnOiAvdmFsdWUvXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICd2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2J1xuICAgICAgICB9LCAxKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDEtMTAnOiAvXnZhbHVlJC9cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3ZhbHVldmFsdWV2YWx1ZXZhbHVldmFsdWUnXG4gICAgICAgIH0sIDApXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgbmFtZTogL1thLXpdW0EtWl1bMC05XS9cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3lMNSdcbiAgICAgICAgfSwgMClcbiAgICB9KVxuICAgIGRlc2NyaWJlKCdWYWx1ZSAtIE9iamVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWU6IDFcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogMVxuICAgICAgICB9LCAwKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWUxOiAxXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWUyOiAyXG4gICAgICAgIH0sIDEpXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgbmFtZTE6IDEsXG4gICAgICAgICAgICBuYW1lMjogMlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lMzogM1xuICAgICAgICB9LCAxKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWUxOiAxLFxuICAgICAgICAgICAgbmFtZTI6IDJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTE6ICcxJyxcbiAgICAgICAgICAgIG5hbWUyOiAnMidcbiAgICAgICAgfSwgMilcbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICBhOiB7XG4gICAgICAgICAgICAgICAgYjoge1xuICAgICAgICAgICAgICAgICAgICBjOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkOiAxXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGE6IHtcbiAgICAgICAgICAgICAgICBiOiB7XG4gICAgICAgICAgICAgICAgICAgIGM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ6IDJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMSlcbiAgICB9KVxuICAgIGRlc2NyaWJlKCdWYWx1ZSAtIEFycmF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGRvaXQoWzEsIDIsIDNdLCBbMSwgMiwgM10sIDApXG5cbiAgICAgICAgZG9pdChbMSwgMiwgM10sIFsxLCAyLCAzLCA0XSwgMSlcblxuICAgICAgICAvLyAnbmFtZXwxJzogYXJyYXlcbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICAnbmFtZXwxJzogWzEsIDIsIDNdXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICduYW1lJzogMVxuICAgICAgICB9LCAwKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDEnOiBbMSwgMiwgM11cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiAyXG4gICAgICAgIH0sIDApXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8MSc6IFsxLCAyLCAzXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAnbmFtZSc6IDNcbiAgICAgICAgfSwgMClcbiAgICAgICAgZG9pdCh7IC8vIOS4jeajgOa1i1xuICAgICAgICAgICAgJ25hbWV8MSc6IFsxLCAyLCAzXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAnbmFtZSc6IDRcbiAgICAgICAgfSwgMClcblxuICAgICAgICAvLyAnbmFtZXwrMSc6IGFycmF5XG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8KzEnOiBbMSwgMiwgM11cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiAxXG4gICAgICAgIH0sIDApXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8KzEnOiBbMSwgMiwgM11cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiAyXG4gICAgICAgIH0sIDApXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8KzEnOiBbMSwgMiwgM11cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiAzXG4gICAgICAgIH0sIDApXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8KzEnOiBbMSwgMiwgM11cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiA0XG4gICAgICAgIH0sIDApXG5cbiAgICAgICAgLy8gJ25hbWV8bWluLW1heCc6IGFycmF5XG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8Mi0zJzogWzFdXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICduYW1lJzogWzEsIDIsIDMsIDRdXG4gICAgICAgIH0sIDEpXG5cbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICAnbmFtZXwyLTMnOiBbMV1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiBbMV1cbiAgICAgICAgfSwgMSlcblxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDItMyc6IFsxLCAyLCAzXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAnbmFtZSc6IFsxLCAyLCAzLCAxLCAyLCAzLCAxLCAyLCAzLCAxLCAyLCAzXVxuICAgICAgICB9LCAxKVxuXG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgJ25hbWV8Mi0zJzogWzEsIDIsIDNdXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICduYW1lJzogWzEsIDIsIDNdXG4gICAgICAgIH0sIDEpXG5cbiAgICAgICAgZG9pdCh7XG4gICAgICAgICAgICAnbmFtZXwyLTMnOiBbMV1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgJ25hbWUnOiBbMSwgMSwgMV1cbiAgICAgICAgfSwgMClcblxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgICduYW1lfDItMyc6IFsxXVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAnbmFtZSc6IFsxLCAyLCAzXVxuICAgICAgICB9LCAyKVxuXG4gICAgICAgIC8vICduYW1lfGNvdW50JzogYXJyYXlcbiAgICB9KVxuICAgIGRlc2NyaWJlKCdWYWx1ZSAtIFBsYWNlaG9sZGVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGRvaXQoe1xuICAgICAgICAgICAgbmFtZTogJ0BlbWFpbCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ251eXNvZnRAZ21haWwuY29tJ1xuICAgICAgICB9LCAwKVxuICAgICAgICBkb2l0KHtcbiAgICAgICAgICAgIG5hbWU6ICdAaW50J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAxMjNcbiAgICAgICAgfSwgMClcbiAgICB9KVxufSkiXX0=