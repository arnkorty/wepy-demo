'use strict';

/*
    ## Color Convert

    http://blog.csdn.net/idfaya/article/details/6770414
        颜色空间RGB与HSV(HSL)的转换
*/
// https://github.com/harthur/color-convert/blob/master/conversions.js
module.exports = {
	rgb2hsl: function rgb2hsl(rgb) {
		var r = rgb[0] / 255,
		    g = rgb[1] / 255,
		    b = rgb[2] / 255,
		    min = Math.min(r, g, b),
		    max = Math.max(r, g, b),
		    delta = max - min,
		    h,
		    s,
		    l;

		if (max == min) h = 0;else if (r == max) h = (g - b) / delta;else if (g == max) h = 2 + (b - r) / delta;else if (b == max) h = 4 + (r - g) / delta;

		h = Math.min(h * 60, 360);

		if (h < 0) h += 360;

		l = (min + max) / 2;

		if (max == min) s = 0;else if (l <= 0.5) s = delta / (max + min);else s = delta / (2 - max - min);

		return [h, s * 100, l * 100];
	},
	rgb2hsv: function rgb2hsv(rgb) {
		var r = rgb[0],
		    g = rgb[1],
		    b = rgb[2],
		    min = Math.min(r, g, b),
		    max = Math.max(r, g, b),
		    delta = max - min,
		    h,
		    s,
		    v;

		if (max === 0) s = 0;else s = delta / max * 1000 / 10;

		if (max == min) h = 0;else if (r == max) h = (g - b) / delta;else if (g == max) h = 2 + (b - r) / delta;else if (b == max) h = 4 + (r - g) / delta;

		h = Math.min(h * 60, 360);

		if (h < 0) h += 360;

		v = max / 255 * 1000 / 10;

		return [h, s, v];
	},
	hsl2rgb: function hsl2rgb(hsl) {
		var h = hsl[0] / 360,
		    s = hsl[1] / 100,
		    l = hsl[2] / 100,
		    t1,
		    t2,
		    t3,
		    rgb,
		    val;

		if (s === 0) {
			val = l * 255;
			return [val, val, val];
		}

		if (l < 0.5) t2 = l * (1 + s);else t2 = l + s - l * s;
		t1 = 2 * l - t2;

		rgb = [0, 0, 0];
		for (var i = 0; i < 3; i++) {
			t3 = h + 1 / 3 * -(i - 1);
			if (t3 < 0) t3++;
			if (t3 > 1) t3--;

			if (6 * t3 < 1) val = t1 + (t2 - t1) * 6 * t3;else if (2 * t3 < 1) val = t2;else if (3 * t3 < 2) val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;else val = t1;

			rgb[i] = val * 255;
		}

		return rgb;
	},
	hsl2hsv: function hsl2hsv(hsl) {
		var h = hsl[0],
		    s = hsl[1] / 100,
		    l = hsl[2] / 100,
		    sv,
		    v;
		l *= 2;
		s *= l <= 1 ? l : 2 - l;
		v = (l + s) / 2;
		sv = 2 * s / (l + s);
		return [h, sv * 100, v * 100];
	},
	hsv2rgb: function hsv2rgb(hsv) {
		var h = hsv[0] / 60;
		var s = hsv[1] / 100;
		var v = hsv[2] / 100;
		var hi = Math.floor(h) % 6;

		var f = h - Math.floor(h);
		var p = 255 * v * (1 - s);
		var q = 255 * v * (1 - s * f);
		var t = 255 * v * (1 - s * (1 - f));

		v = 255 * v;

		switch (hi) {
			case 0:
				return [v, t, p];
			case 1:
				return [q, v, p];
			case 2:
				return [p, v, t];
			case 3:
				return [p, q, v];
			case 4:
				return [t, p, v];
			case 5:
				return [v, p, q];
		}
	},
	hsv2hsl: function hsv2hsl(hsv) {
		var h = hsv[0],
		    s = hsv[1] / 100,
		    v = hsv[2] / 100,
		    sl,
		    l;

		l = (2 - s) * v;
		sl = s * v;
		sl /= l <= 1 ? l : 2 - l;
		l /= 2;
		return [h, sl * 100, l * 100];
	},
	// http://www.140byt.es/keywords/color
	rgb2hex: function rgb2hex(a, // red, as a number from 0 to 255
	b, // green, as a number from 0 to 255
	c // blue, as a number from 0 to 255
	) {
		return "#" + ((256 + a << 8 | b) << 8 | c).toString(16).slice(1);
	},
	hex2rgb: function hex2rgb(a // take a "#xxxxxx" hex string,
	) {
		a = '0x' + a.slice(1).replace(a.length > 4 ? a : /./g, '$&$&') | 0;
		return [a >> 16, a >> 8 & 255, a & 255];
	}
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbG9yX2NvbnZlcnQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsInJnYjJoc2wiLCJyZ2IiLCJyIiwiZyIsImIiLCJtaW4iLCJNYXRoIiwibWF4IiwiZGVsdGEiLCJoIiwicyIsImwiLCJyZ2IyaHN2IiwidiIsImhzbDJyZ2IiLCJoc2wiLCJ0MSIsInQyIiwidDMiLCJ2YWwiLCJpIiwiaHNsMmhzdiIsInN2IiwiaHN2MnJnYiIsImhzdiIsImhpIiwiZmxvb3IiLCJmIiwicCIsInEiLCJ0IiwiaHN2MmhzbCIsInNsIiwicmdiMmhleCIsImEiLCJjIiwidG9TdHJpbmciLCJzbGljZSIsImhleDJyZ2IiLCJyZXBsYWNlIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7QUFNQTtBQUNBQSxPQUFPQyxPQUFQLEdBQWlCO0FBQ2hCQyxVQUFTLFNBQVNBLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXNCO0FBQzlCLE1BQUlDLElBQUlELElBQUksQ0FBSixJQUFTLEdBQWpCO0FBQUEsTUFDQ0UsSUFBSUYsSUFBSSxDQUFKLElBQVMsR0FEZDtBQUFBLE1BRUNHLElBQUlILElBQUksQ0FBSixJQUFTLEdBRmQ7QUFBQSxNQUdDSSxNQUFNQyxLQUFLRCxHQUFMLENBQVNILENBQVQsRUFBWUMsQ0FBWixFQUFlQyxDQUFmLENBSFA7QUFBQSxNQUlDRyxNQUFNRCxLQUFLQyxHQUFMLENBQVNMLENBQVQsRUFBWUMsQ0FBWixFQUFlQyxDQUFmLENBSlA7QUFBQSxNQUtDSSxRQUFRRCxNQUFNRixHQUxmO0FBQUEsTUFNQ0ksQ0FORDtBQUFBLE1BTUlDLENBTko7QUFBQSxNQU1PQyxDQU5QOztBQVFBLE1BQUlKLE9BQU9GLEdBQVgsRUFDQ0ksSUFBSSxDQUFKLENBREQsS0FFSyxJQUFJUCxLQUFLSyxHQUFULEVBQ0pFLElBQUksQ0FBQ04sSUFBSUMsQ0FBTCxJQUFVSSxLQUFkLENBREksS0FFQSxJQUFJTCxLQUFLSSxHQUFULEVBQ0pFLElBQUksSUFBSSxD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RUFBd0JBLElBQUksR0FBNUIsQ0FBUDtBQUNBO0FBeEtlLENBQWpCIiwiZmlsZSI6ImNvbG9yX2NvbnZlcnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICAgICMjIENvbG9yIENvbnZlcnRcblxuICAgIGh0dHA6Ly9ibG9nLmNzZG4ubmV0L2lkZmF5YS9hcnRpY2xlL2RldGFpbHMvNjc3MDQxNFxuICAgICAgICDpopzoibLnqbrpl7RSR0LkuI5IU1YoSFNMKeeahOi9rOaNolxuKi9cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9oYXJ0aHVyL2NvbG9yLWNvbnZlcnQvYmxvYi9tYXN0ZXIvY29udmVyc2lvbnMuanNcbm1vZHVsZS5leHBvcnRzID0ge1xuXHRyZ2IyaHNsOiBmdW5jdGlvbiByZ2IyaHNsKHJnYikge1xuXHRcdHZhciByID0gcmdiWzBdIC8gMjU1LFxuXHRcdFx0ZyA9IHJnYlsxXSAvIDI1NSxcblx0XHRcdGIgPSByZ2JbMl0gLyAyNTUsXG5cdFx0XHRtaW4gPSBNYXRoLm1pbihyLCBnLCBiKSxcblx0XHRcdG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuXHRcdFx0ZGVsdGEgPSBtYXggLSBtaW4sXG5cdFx0XHRoLCBzLCBsO1xuXG5cdFx0aWYgKG1heCA9PSBtaW4pXG5cdFx0XHRoID0gMDtcblx0XHRlbHNlIGlmIChyID09IG1heClcblx0XHRcdGggPSAoZyAtIGIpIC8gZGVsdGE7XG5cdFx0ZWxzZSBpZiAoZyA9PSBtYXgpXG5cdFx0XHRoID0gMiArIChiIC0gcikgLyBkZWx0YTtcblx0XHRlbHNlIGlmIChiID09IG1heClcblx0XHRcdGggPSA0ICsgKHIgLSBnKSAvIGRlbHRhO1xuXG5cdFx0aCA9IE1hdGgubWluKGggKiA2MCwgMzYwKTtcblxuXHRcdGlmIChoIDwgMClcblx0XHRcdGggKz0gMzYwO1xuXG5cdFx0bCA9IChtaW4gKyBtYXgpIC8gMjtcblxuXHRcdGlmIChtYXggPT0gbWluKVxuXHRcdFx0cyA9IDA7XG5cdFx0ZWxzZSBpZiAobCA8PSAwLjUpXG5cdFx0XHRzID0gZGVsdGEgLyAobWF4ICsgbWluKTtcblx0XHRlbHNlXG5cdFx0XHRzID0gZGVsdGEgLyAoMiAtIG1heCAtIG1pbik7XG5cblx0XHRyZXR1cm4gW2gsIHMgKiAxMDAsIGwgKiAxMDBdO1xuXHR9LFxuXHRyZ2IyaHN2OiBmdW5jdGlvbiByZ2IyaHN2KHJnYikge1xuXHRcdHZhciByID0gcmdiWzBdLFxuXHRcdFx0ZyA9IHJnYlsxXSxcblx0XHRcdGIgPSByZ2JbMl0sXG5cdFx0XHRtaW4gPSBNYXRoLm1pbihyLCBnLCBiKSxcblx0XHRcdG1heCA9IE1hdGgubWF4KHIsIGcsIGIpLFxuXHRcdFx0ZGVsdGEgPSBtYXggLSBtaW4sXG5cdFx0XHRoLCBzLCB2O1xuXG5cdFx0aWYgKG1heCA9PT0gMClcblx0XHRcdHMgPSAwO1xuXHRcdGVsc2Vcblx0XHRcdHMgPSAoZGVsdGEgLyBtYXggKiAxMDAwKSAvIDEwO1xuXG5cdFx0aWYgKG1heCA9PSBtaW4pXG5cdFx0XHRoID0gMDtcblx0XHRlbHNlIGlmIChyID09IG1heClcblx0XHRcdGggPSAoZyAtIGIpIC8gZGVsdGE7XG5cdFx0ZWxzZSBpZiAoZyA9PSBtYXgpXG5cdFx0XHRoID0gMiArIChiIC0gcikgLyBkZWx0YTtcblx0XHRlbHNlIGlmIChiID09IG1heClcblx0XHRcdGggPSA0ICsgKHIgLSBnKSAvIGRlbHRhO1xuXG5cdFx0aCA9IE1hdGgubWluKGggKiA2MCwgMzYwKTtcblxuXHRcdGlmIChoIDwgMClcblx0XHRcdGggKz0gMzYwO1xuXG5cdFx0diA9ICgobWF4IC8gMjU1KSAqIDEwMDApIC8gMTA7XG5cblx0XHRyZXR1cm4gW2gsIHMsIHZdO1xuXHR9LFxuXHRoc2wycmdiOiBmdW5jdGlvbiBoc2wycmdiKGhzbCkge1xuXHRcdHZhciBoID0gaHNsWzBdIC8gMzYwLFxuXHRcdFx0cyA9IGhzbFsxXSAvIDEwMCxcblx0XHRcdGwgPSBoc2xbMl0gLyAxMDAsXG5cdFx0XHR0MSwgdDIsIHQzLCByZ2IsIHZhbDtcblxuXHRcdGlmIChzID09PSAwKSB7XG5cdFx0XHR2YWwgPSBsICogMjU1O1xuXHRcdFx0cmV0dXJuIFt2YWwsIHZhbCwgdmFsXTtcblx0XHR9XG5cblx0XHRpZiAobCA8IDAuNSlcblx0XHRcdHQyID0gbCAqICgxICsgcyk7XG5cdFx0ZWxzZVxuXHRcdFx0dDIgPSBsICsgcyAtIGwgKiBzO1xuXHRcdHQxID0gMiAqIGwgLSB0MjtcblxuXHRcdHJnYiA9IFswLCAwLCAwXTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuXHRcdFx0dDMgPSBoICsgMSAvIDMgKiAtKGkgLSAxKTtcblx0XHRcdGlmICh0MyA8IDApIHQzKys7XG5cdFx0XHRpZiAodDMgPiAxKSB0My0tO1xuXG5cdFx0XHRpZiAoNiAqIHQzIDwgMSlcblx0XHRcdFx0dmFsID0gdDEgKyAodDIgLSB0MSkgKiA2ICogdDM7XG5cdFx0XHRlbHNlIGlmICgyICogdDMgPCAxKVxuXHRcdFx0XHR2YWwgPSB0Mjtcblx0XHRcdGVsc2UgaWYgKDMgKiB0MyA8IDIpXG5cdFx0XHRcdHZhbCA9IHQxICsgKHQyIC0gdDEpICogKDIgLyAzIC0gdDMpICogNjtcblx0XHRcdGVsc2Vcblx0XHRcdFx0dmFsID0gdDE7XG5cblx0XHRcdHJnYltpXSA9IHZhbCAqIDI1NTtcblx0XHR9XG5cblx0XHRyZXR1cm4gcmdiO1xuXHR9LFxuXHRoc2wyaHN2OiBmdW5jdGlvbiBoc2wyaHN2KGhzbCkge1xuXHRcdHZhciBoID0gaHNsWzBdLFxuXHRcdFx0cyA9IGhzbFsxXSAvIDEwMCxcblx0XHRcdGwgPSBoc2xbMl0gLyAxMDAsXG5cdFx0XHRzdiwgdjtcblx0XHRsICo9IDI7XG5cdFx0cyAqPSAobCA8PSAxKSA/IGwgOiAyIC0gbDtcblx0XHR2ID0gKGwgKyBzKSAvIDI7XG5cdFx0c3YgPSAoMiAqIHMpIC8gKGwgKyBzKTtcblx0XHRyZXR1cm4gW2gsIHN2ICogMTAwLCB2ICogMTAwXTtcblx0fSxcblx0aHN2MnJnYjogZnVuY3Rpb24gaHN2MnJnYihoc3YpIHtcblx0XHR2YXIgaCA9IGhzdlswXSAvIDYwXG5cdFx0dmFyIHMgPSBoc3ZbMV0gLyAxMDBcblx0XHR2YXIgdiA9IGhzdlsyXSAvIDEwMFxuXHRcdHZhciBoaSA9IE1hdGguZmxvb3IoaCkgJSA2XG5cblx0XHR2YXIgZiA9IGggLSBNYXRoLmZsb29yKGgpXG5cdFx0dmFyIHAgPSAyNTUgKiB2ICogKDEgLSBzKVxuXHRcdHZhciBxID0gMjU1ICogdiAqICgxIC0gKHMgKiBmKSlcblx0XHR2YXIgdCA9IDI1NSAqIHYgKiAoMSAtIChzICogKDEgLSBmKSkpXG5cblx0XHR2ID0gMjU1ICogdlxuXG5cdFx0c3dpdGNoIChoaSkge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHRyZXR1cm4gW3YsIHQsIHBdXG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdHJldHVybiBbcSwgdiwgcF1cblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0cmV0dXJuIFtwLCB2LCB0XVxuXHRcdFx0Y2FzZSAzOlxuXHRcdFx0XHRyZXR1cm4gW3AsIHEsIHZdXG5cdFx0XHRjYXNlIDQ6XG5cdFx0XHRcdHJldHVybiBbdCwgcCwgdl1cblx0XHRcdGNhc2UgNTpcblx0XHRcdFx0cmV0dXJuIFt2LCBwLCBxXVxuXHRcdH1cblx0fSxcblx0aHN2MmhzbDogZnVuY3Rpb24gaHN2MmhzbChoc3YpIHtcblx0XHR2YXIgaCA9IGhzdlswXSxcblx0XHRcdHMgPSBoc3ZbMV0gLyAxMDAsXG5cdFx0XHR2ID0gaHN2WzJdIC8gMTAwLFxuXHRcdFx0c2wsIGw7XG5cblx0XHRsID0gKDIgLSBzKSAqIHY7XG5cdFx0c2wgPSBzICogdjtcblx0XHRzbCAvPSAobCA8PSAxKSA/IGwgOiAyIC0gbDtcblx0XHRsIC89IDI7XG5cdFx0cmV0dXJuIFtoLCBzbCAqIDEwMCwgbCAqIDEwMF07XG5cdH0sXG5cdC8vIGh0dHA6Ly93d3cuMTQwYnl0LmVzL2tleXdvcmRzL2NvbG9yXG5cdHJnYjJoZXg6IGZ1bmN0aW9uKFxuXHRcdGEsIC8vIHJlZCwgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NVxuXHRcdGIsIC8vIGdyZWVuLCBhcyBhIG51bWJlciBmcm9tIDAgdG8gMjU1XG5cdFx0YyAvLyBibHVlLCBhcyBhIG51bWJlciBmcm9tIDAgdG8gMjU1XG5cdCkge1xuXHRcdHJldHVybiBcIiNcIiArICgoMjU2ICsgYSA8PCA4IHwgYikgPDwgOCB8IGMpLnRvU3RyaW5nKDE2KS5zbGljZSgxKVxuXHR9LFxuXHRoZXgycmdiOiBmdW5jdGlvbihcblx0XHRhIC8vIHRha2UgYSBcIiN4eHh4eHhcIiBoZXggc3RyaW5nLFxuXHQpIHtcblx0XHRhID0gJzB4JyArIGEuc2xpY2UoMSkucmVwbGFjZShhLmxlbmd0aCA+IDQgPyBhIDogLy4vZywgJyQmJCYnKSB8IDA7XG5cdFx0cmV0dXJuIFthID4+IDE2LCBhID4+IDggJiAyNTUsIGEgJiAyNTVdXG5cdH1cbn0iXX0=